# Byaboneka+ ğŸ”

**Trust-Aware Lost & Found Infrastructure for Rwanda's Transport Ecosystem**

> ALU Mission Capstone Project â€” A comprehensive platform that uses smart matching, verification systems, fraud detection, and cooperative accountability to securely reunite people with their lost belongings.

---

## ğŸ— Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend       â”‚â”€â”€â”€â”€â–¶â”‚   Backend API    â”‚â”€â”€â”€â”€â–¶â”‚  PostgreSQL  â”‚
â”‚   React + Vite   â”‚     â”‚   Express + TS   â”‚     â”‚  16-alpine   â”‚
â”‚   Tailwind CSS   â”‚     â”‚   Port 4000      â”‚     â”‚  Port 5432   â”‚
â”‚   Port 80/3000   â”‚     â”‚                  â”‚     â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Stack:**  
- **Frontend:** React 18, TypeScript, Vite, Tailwind CSS, Zustand, React Router 6  
- **Backend:** Node.js 20, Express, TypeScript, PostgreSQL, Zod, JWT auth  
- **Deployment:** Docker multi-stage builds, Vercel (frontend), Render (backend)  
- **CI/CD:** GitHub Actions with lint, test, build, and deploy stages  

---

## ğŸš€ Quick Start

### Prerequisites
- Node.js 20+
- PostgreSQL 16+
- Docker & Docker Compose (for containerized deployment)

### Option 1: Docker (Recommended)

```bash
# Clone the repository
git clone https://github.com/your-repo/byaboneka-plus.git
cd byaboneka-plus

# Copy environment template
cp .env.example .env
# Edit .env with your real values (generate JWT secrets with: openssl rand -hex 32)

# Start everything
docker compose -f docker-compose.production.yml up -d

# Seed with demo data (optional)
docker exec -it byaboneka-plus-api-1 node -e "require('./dist/seeds/run')"
```

Frontend: http://localhost  
API: http://localhost:4000/api/v1  
Health: http://localhost:4000/api/v1/health  

### Option 2: Manual Setup

**Backend:**
```bash
cd backend
cp .env.example .env   # Edit with your database credentials
npm install
npm run dev            # Starts on port 4000
```

**Frontend:**
```bash
cd frontend
cp .env.example .env   # Set VITE_API_URL
npm install
npm run dev            # Starts on port 3000
```

---

## ğŸ§  Novel Technical Features

### 1. Smart Matching Algorithm
Multi-dimensional matching between lost and found items using category, location proximity, temporal analysis, and keyword overlap with weighted scoring.

### 2. Verification Strength Analysis
Real-time analysis of verification question quality â€” rates questions for entropy, specificity, and uniqueness to prevent easily-guessable ownership claims.

### 3. Fraud Detection System
Behavioral analysis engine that monitors for rapid-fire claims, suspicious patterns, and velocity anomalies. Risk signals are scored and aggregated per-user.

### 4. Cooperative Accountability Leaderboard
Transparent ranking of transport cooperatives based on return rates, speed, reliability, and staff quality â€” incentivizing good behavior.

### 5. Sensitive Content Redaction
Automatic detection and redaction of phone numbers, IDs, and personally identifiable information in item descriptions to protect user privacy.

### 6. OTP Handover Verification
Secure 6-digit OTP system for physical item handovers â€” generated by the owner, verified by the finder, with attempt limits and expiry.

### 7. Dispute Resolution Workflow
Structured dispute process with evidence submission, admin review, and trust score adjustments based on resolution outcomes.

### 8. Duplicate Detection
Pre-submission analysis that checks for potential duplicate reports using category, description similarity, location, and date proximity.

---

## ğŸ“ Project Structure

```
byaboneka-plus/
â”œâ”€â”€ backend/                    # Express API server
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ config/            # Database, Swagger configs
â”‚   â”‚   â”œâ”€â”€ controllers/       # Route handlers (7 controllers)
â”‚   â”‚   â”œâ”€â”€ middleware/        # Auth, validation, rate limiting, error handling
â”‚   â”‚   â”œâ”€â”€ migrations/        # Database schema (idempotent)
â”‚   â”‚   â”œâ”€â”€ routes/            # Core, enhanced, and novel feature routes
â”‚   â”‚   â”œâ”€â”€ seeds/             # Demo data seeder
â”‚   â”‚   â”œâ”€â”€ services/          # Business logic (14 services)
â”‚   â”‚   â”œâ”€â”€ types/             # TypeScript type definitions
â”‚   â”‚   â””â”€â”€ utils/             # Shared utilities
â”‚   â”œâ”€â”€ tests/                 # Unit + integration tests
â”‚   â”œâ”€â”€ Dockerfile             # Multi-stage production build
â”‚   â””â”€â”€ docker-compose.yml     # Local dev with PostgreSQL
â”‚
â”œâ”€â”€ frontend/                   # React SPA
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/        # Reusable UI components + layout
â”‚   â”‚   â”œâ”€â”€ pages/             # 26 page components
â”‚   â”‚   â”œâ”€â”€ services/          # API client with interceptors
â”‚   â”‚   â”œâ”€â”€ store/             # Zustand auth store (persisted)
â”‚   â”‚   â”œâ”€â”€ types/             # Shared TypeScript types
â”‚   â”‚   â””â”€â”€ utils/             # Date formatting, helpers
â”‚   â”œâ”€â”€ Dockerfile             # Multi-stage build with nginx
â”‚   â”œâ”€â”€ nginx.conf             # SPA serving + security headers
â”‚   â””â”€â”€ vercel.json            # Vercel deployment config
â”‚
â”œâ”€â”€ docker-compose.production.yml  # Full-stack production deployment
â””â”€â”€ .env.example                   # Environment template
```

---

## ğŸ” API Endpoints (30 routes)

### Auth
| Method | Endpoint | Description |
|--------|----------|-------------|
| POST | `/auth/register` | Register new user |
| POST | `/auth/login` | Login |
| POST | `/auth/refresh` | Refresh access token |
| POST | `/auth/logout` | Logout |
| POST | `/auth/forgot-password` | Request password reset |
| POST | `/auth/reset-password` | Reset password with token |
| GET | `/auth/profile` | Get current user profile |
| PUT | `/auth/profile` | Update profile |
| POST | `/auth/change-password` | Change password |
| POST | `/auth/email/verify/request` | Request email verification |
| POST | `/auth/email/verify` | Verify email with token |
| GET | `/auth/email/status` | Check email verification status |

### Items
| Method | Endpoint | Description |
|--------|----------|-------------|
| POST | `/lost-items` | Report lost item |
| GET | `/lost-items` | Search lost items |
| GET | `/lost-items/:id` | Get lost item detail |
| PUT | `/lost-items/:id` | Update lost item |
| DELETE | `/lost-items/:id` | Delete lost item |
| GET | `/lost-items/:id/matches` | Get matching found items |
| POST | `/lost-items/check-duplicate` | Check for duplicates |
| POST | `/found-items` | Report found item |
| GET | `/found-items` | Search found items |
| POST | `/found-items/:id/images` | Upload images |

### Claims & Verification
| Method | Endpoint | Description |
|--------|----------|-------------|
| POST | `/claims` | Create claim |
| GET | `/claims/:id/questions` | Get verification questions |
| POST | `/claims/:id/verify` | Submit verification answers |
| POST | `/claims/:id/handover/otp` | Generate handover OTP |
| POST | `/claims/:id/handover/verify` | Verify OTP |
| POST | `/claims/:id/dispute` | Open dispute |

### Admin & Analytics
| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/admin/stats` | Dashboard statistics |
| GET | `/admin/users` | User management |
| GET | `/admin/fraud/flagged-users` | Fraud flagged users |
| GET | `/cooperatives/leaderboard` | Cooperative rankings |

---

## ğŸ§ª Testing

```bash
cd backend

# Run all tests
npm test

# Unit tests only
npm run test:unit

# Integration tests (requires PostgreSQL)
npm run test:integration

# With coverage
npm run test:coverage
```

---

## ğŸŒ Deployment

### Vercel (Frontend)
1. Connect GitHub repo to Vercel
2. Set root directory to `frontend`
3. Set environment variable: `VITE_API_URL=https://your-api-url/api/v1`
4. Deploy automatically on push to `main`

### Render (Backend)
1. Create a new Web Service from GitHub
2. Set root directory to `backend`
3. Build command: `npm ci && npm run build`
4. Start command: `node dist/index.js`
5. Add environment variables from `.env.example`
6. Add a PostgreSQL database and link it

### Docker Self-Hosted
```bash
cp .env.example .env
# Edit .env with production values
docker compose -f docker-compose.production.yml up -d
```

---

## ğŸ“‹ Demo Accounts (after seeding)

| Role | Email | Password |
|------|-------|----------|
| Admin | admin@byaboneka.rw | Admin123! |
| Citizen | jean@example.com | Password123! |
| Coop Staff | staff@kbs.rw | Password123! |

---

## ğŸ“„ License

MIT â€” MAYALA Plamedi, African Leadership University
